webpackJsonp([1],{1039:function(e,t,s){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=(s(74),s(73)),r=n(a),i=s(18),l=n(i),m=s(2),o=n(m),u=s(16),c=n(u),d=s(4),p=n(d),f=s(3),g=n(f),h=s(43),_=n(h),A=s(114),w=n(A),E=s(1),v=n(E),b=s(29),y=s(39),T=s(411),I=n(T),P=s(26),x=n(P),D=s(139),R=n(D),C=s(113),k=n(C);s(409);var N=s(405),U=n(N),O=s(407),L=s(404),j=n(L),M=s(402),S=n(M),H=s(403),q=n(H),J=s(406),Y=n(J),B=s(168),F=n(B),z=function(e){function t(e){(0,o.default)(this,t);var s=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return s.onClickSaveBtn=function(){s.props.dispatch(F.default.submitAnswersAsync()).then(function(e){return e?(console.error(e),null):s.props.dispatch(F.default.fetchAssignmentDetailAsync(s.props.currentAssignment._id,s.props.currentProblem._id))})},s.renderQuestionsAndAnswers=function(){var e=s.props,t=e.currentAssignment,n=e.currentProblem,a=e.currentAnswers,r=e.dispatch;if(!n)return[];var i=(0,_.default)(n.questions,function(e,s){return v.default.createElement("li",{key:"question-item-"+e._id},v.default.createElement(I.default,{className:"app-markdown assignments__question-item",source:e.text||"",escapeHtml:!0,renderers:{CodeBlock:S.default,Code:S.default,Link:q.default}}),v.default.createElement(j.default,{label:s+1,value:a[s].text,onChange:function(e){r(F.default.changeAnswerValue(s,e.target.value))},disabled:n.read_only||t.begin_at>(new Date).getTime()||t.end_at<(new Date).getTime()}))});return v.default.createElement("div",{className:"assignments__answers-container"},v.default.createElement("ol",{className:"assignments__answers-list"},i))},s.state={},s.__disableInspect={currentAssignment:s.props.currentAssignment},s}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),this.props.dispatch(F.default.fetchAssignmentListAsync()).then(function(){if(e.props.match.params.assignmentId){var t=e.props.match.params,s=t.assignmentId,n=t.problemId;e.props.dispatch(F.default.fetchAssignmentDetailAsync(s,n))}})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.match.params.assignmentId&&e.match.params.assignmentId!==this.props.match.params.assignmentId&&this.props.dispatch(F.default.fetchAssignmentDetailAsync(e.match.params.assignmentId,this.props.match.params.problemId)),e.match.params.problemId&&e.match.params.problemId!==this.props.match.params.problemId&&e.currentAssignment&&(window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0),this.props.dispatch(F.default.fetchAssignmentDetailAsync(e.match.params.assignmentId,this.props.match.params.problemId)).then(function(){t.props.dispatch(F.default.setCurrentProblem((0,w.default)(e.currentAssignment.problems,function(t){return t._id===e.match.params.problemId})))}))}},{key:"componentWillUnmount",value:function(){window.UiAutosave&&(clearTimeout(window.UiAutosave),window.UiAutosave=void 0)}},{key:"render",value:function(){var e=this.props,t=e.currentAssignment,s=e.currentProblem,n=e.currentAnswersIsDirty;return v.default.createElement("div",{className:"app-module relative full-size assignments"},v.default.createElement(U.default,{match:this.props.match}),v.default.createElement(y.Switch,null,v.default.createElement(y.Route,{path:"/assignments",exact:!0},v.default.createElement("main",{className:"disp-flex assignments__main"},v.default.createElement("h1",{className:"text-align-center"},"Select an assignment to complete."))),v.default.createElement(y.Route,{path:"/assignments/change-pwd",exact:!0},v.default.createElement("main",{className:"disp-flex assignments__main"},v.default.createElement(Y.default,null))),v.default.createElement(y.Route,{path:"/assignments/:assignmentId",exact:!0},v.default.createElement("main",{className:"disp-flex assignments__main"},v.default.createElement("div",{className:"assignments__tags-wrapper"},v.default.createElement(O.ProblemTagsContainer,{tags:t?t.problems:[],numEachRow:10,assignmentId:this.props.match.params.assignmentId,problemId:this.props.match.params.problemId})))),v.default.createElement(y.Route,{path:"/assignments/:assignmentId/:problemId",exact:!0},v.default.createElement("main",{className:"disp-flex assignments__main"},v.default.createElement("div",{className:"assignments__tags-wrapper"},v.default.createElement(O.ProblemTagsContainer,{tags:t?t.problems:[],numEachRow:10,assignmentId:this.props.match.params.assignmentId,problemId:this.props.match.params.problemId})),v.default.createElement("div",{className:"assignments__content-container"},v.default.createElement(I.default,{className:"app-markdown assignments__content",source:s?s.text:"",escapeHtml:!0,renderers:{CodeBlock:S.default,Code:S.default,Link:q.default}}),this.renderQuestionsAndAnswers(),v.default.createElement(y.Prompt,{when:n,message:function(){return"Are you sure you want to go to another page? Your current changes will not be saved."}})),v.default.createElement("div",{className:"assignments__op-btns-container"},v.default.createElement(r.default,{type:"primary",size:"large",onClick:this.onClickSaveBtn,disabled:!!t&&t.end_at<(new Date).getTime()||!n},"Save"),v.default.createElement("a",{href:"/submission-history/"+(t?t._id:"")+"/"+(s?s._id:""),target:"_blank",rel:"noopener noreferrer"},v.default.createElement(r.default,{className:"m-l-md",type:"primary",size:"large"},"View submission history")),v.default.createElement("div",{className:"float-right"},v.default.createElement("span",null,"This assignment will be closed at: "),v.default.createElement("span",null,t?(0,x.default)(t.end_at).format("YYYY-MM-DD HH:mm:ss"):"","Â UTC+8")))))))}}]),t}(v.default.Component);z.propTypes={dispatch:E.PropTypes.func.isRequired,match:E.PropTypes.object.isRequired,currentAssignment:E.PropTypes.instanceOf(R.default),currentProblem:E.PropTypes.instanceOf(k.default),currentAnswers:E.PropTypes.array,currentAnswersIsDirty:E.PropTypes.bool.isRequired},z.defaultProps={currentAssignment:null,currentProblem:null,currentAnswers:[]};var Q=function(e){return{currentAssignment:e.assignments.currentAssignment,currentProblem:e.assignments.currentProblem,currentAnswers:e.assignments.currentAnswers,currentAnswersIsDirty:e.assignments.currentAnswersIsDirty}},V=function(e){return{dispatch:e}},W=(0,b.connect)(Q,V)(z);t.default=W;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"AssignmentsModule","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(Q,"mapStateToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(V,"mapDispatchesToProps","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"),__REACT_HOT_LOADER__.register(W,"default","/Users/joshoy/repo/TJLMS-FE/src/modules/assignments/index.jsx"))}()}});